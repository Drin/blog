# Reading Summary 2019-04-30

&middot; by Aldrin Montana

## WiscKey - Separating Keys from Values in SSD-Conscious Storage

#### Relevant Readings


#### Problem Statement

The authors are trying to reduce the write amplification that LSM-trees have so that they are
better suited to flash storage (SSDs).

#### Related Work
> What other approaches or solutions existed at the time that this
> work was done? What was wrong with the other approaches or solutions?


#### Proposed Solution
> What is the authors' approach or solution? Why is it better than the
> other approaches or solutions? How does it perform?

The authors approach focuses on the key insight that compaction of pages in an LSM-tree
can be much more efficient if (large) values are stored off-page in a log. This allows
LSM pages (or SSTables in LevelDB) to fit more keys because the values stored with the
keys are just locations where the valuese are actually written. Then, the write amplification
of appending to LSM pages and then running compaction is limited to something along the lines
of a 16 bit key and a 1KB value, which is significantly less than a 16 bit key and upwards of
several MBs (or larger) values.


#### Contribution

One important characteristic of this work is the utility of a seemingly small change (co-locate
keys and values or separate values from keys using a level of indirection) can have for tuning
a data structure to better match the workloads or better utilize hardware.

In addition, this paper provides some insights into the properties of flash storage that others
may want to target.


#### Comments and Questions

1. I wonder if other approaches to garbage collecting deleted values were explored. The described
method requires walking the log in a specific range and querying the LSM-tree to see if the values
are still valid. I think this very much is inspired by compaction which is cool, but I wonder if
there could simply be something that runs in the background immediately following compaction that
goes through the vLog to remove values corresponding to keys that were removed during compaction.

2. I think the evaluation would be even more compelling if they included a version of LevelDB that
separates values into a vLog and tried to keep everything else as much the same as possible. Then
it would be interesting to see if structures such as bloom filters still provide a performance
benefit and see how the read amplification is reduced. This would bridge the gap between a simpler
system that separates and key values and a complicated system that tries to address read/write
performance but does not try to address read/write amplification.

3. 

<!-- resources -->
